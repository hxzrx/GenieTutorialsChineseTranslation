# 实用初始化程序自定义应用配置

https://genieframework.com/docs/genie/v5.11/tutorials/Initializers.html

初始化程序(initializer)是Julia源码文件, 它们在应用的生命周期的前期加载(先于路由, 控制器, 模型). 初始化程序设计的目的是实现配置代码, 这些配置将用于应用的其它部分(例如数据库连接, 日志设置等).

初始化程序应当放在`config/initializer/`目录下, 它们会被Genie自动加载到App中.

如果配置与环境相关(例如开发数据库与生成数据库拥有不同的连接), 这些差异部分应当添加到对应的`config/env/*.jl`中.

## 最佳实践

* 初始化程序的命名, 虽然可以随意命名, 但最好实用描述性名称.
* 不要使用大写名称, 除非你要定义一个模块(这是为了复合Julia的命名实践).
* 保持初始化程序的文件小而专注, 因此一个初始化程序只做一件事.
* 可以按需求添加任意多的初始化程序.
* 不要滥用初始化程序, 它们不是用于托管复杂代码--app的逻辑应该放在模型和控制器目录下.

## 加载顺序

初始化程序的加载顺序是它们从文件系统读取的顺序, 如果某个初始化程序依赖于另外一个初始化程序, 这种情况大部分意味着你要实用模块(model)或库(library)文件来进行重构.

**提示**: 库文件是Julia文件, 它们提供单独的功能, 它们可以放在`lib/`目录下, 并且这个目录也会被Genie自动加载. 当lib/`目录不存在的情况下要手工创建.

## 作用域(Scope)

添加到初始化程序文件中的所有的定义(变量, 常量, 函数, 模块, 等等), 都会加载到App的模块中. 因此, 比如App名称为`MyGenieApp`, 这些定义就会位于`MyGenieApp`模块下.

**提示**: 假定App的名称是可变的, 仍然可以通过`Main.UserApp`常量来访问这个App的模块. 因此, 所有添加到初始化程序的定义, 也都可以通过`Main.UserApp`模块来访问.